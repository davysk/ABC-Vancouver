!function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=58)}({0:function(t,e,r){t.exports=r(18)},1:function(t,e){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.__esModule=!0,t.exports.default=t.exports},10:function(t,e,r){"use strict";r.d(e,"a",(function(){return u})),r.d(e,"b",(function(){return l}));var n=r(1),o=r.n(n);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var c={base:{color:"#32325d",fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontSize:"15px",fontSmoothing:"antialiased",fontWeight:"normal","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};function u(t,e){if(document.getElementById("simpay-stripe-element-styles"))return c;var r,n=document.createElement("style");if(n.id="simpay-stripe-element-styles",(r=document.querySelector("input.simpay-email"))||(r=document.querySelector('body [role="main"] input:not([type="hidden"])')),!r)return n.innerHTML=".StripeElement.simpay-field-wrap {\n\t\t\tbackground: #fff;\n\t\t\tborder: 1px solid #d1d1d1;\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 0.4375em;\n\t\t\theight: 36px;\n\t\t\tmin-height: 36px;\n\t\t}",document.body.appendChild(n),c;var o=window.getComputedStyle(r),a=(window.getComputedStyle(r,"::placeholder"),["top","right","bottom","left"].map((function(t){return"border-".concat(t,"-color: ").concat(o.getPropertyValue("border-".concat(t,"-color")),";\n\t\t\tborder-").concat(t,"-width: ").concat(o.getPropertyValue("border-".concat(t,"-width")),";\n\t\t\tborder-").concat(t,"-style: ").concat(o.getPropertyValue("border-".concat(t,"-style")),";\n\t\t\tpadding-").concat(t,": ").concat(o.getPropertyValue("padding-".concat(t)),";")}))),i=["top-right","bottom-right","bottom-left","top-left"].map((function(t){return"border-".concat(t,"-radius: ").concat(o.getPropertyValue("border-".concat(t,"-radius")),";")}));return n.innerHTML=".StripeElement.simpay-field-wrap {\n\t\t\tbackground-color: ".concat(o.getPropertyValue("background-color"),";\n\t\t\t").concat(a.join(""),"\n\t\t\t").concat(i.join(""),"\n\t\t}"),document.body.appendChild(n),{base:{color:o.getPropertyValue("color"),fontFamily:o.getPropertyValue("font-family"),fontSize:o.getPropertyValue("font-size"),fontWeight:o.getPropertyValue("font-weight"),fontSmoothing:o.getPropertyValue("-webkit-font-smoothing"),"::placeholder":{color:"#c7c7c7"}}}}function s(t){var e={line1:"street",city:"city",state:"state",postal_code:"zip",country:"country"};return Object.keys(e).reduce((function(r,n){var a;return i(i({},r),{},o()({},n,(null===(a=t.querySelector(".simpay-address-".concat(e[n])))||void 0===a?void 0:a.value)||null))}),{})}function l(t){var e,r,n,o=t[0],a=(null===(e=o.querySelector(".simpay-customer-name"))||void 0===e?void 0:e.value)||null,i=(null===(r=o.querySelector(".simpay-email"))||void 0===r?void 0:r.value)||null,c=(null===(n=o.querySelector(".simpay-telephone"))||void 0===n?void 0:n.value)||null,u=null,l=null,p=o.querySelector(".simpay-billing-address-container");p&&(u=s(p));var f=o.querySelector(".simpay-same-address-toggle");if(f&&!0===f.checked)l=u;else{var d=o.querySelector(".simpay-shipping-address-container");d&&(l=s(d))}return{name:a,email:i,phone:c,address:u,shippingAddress:l}}},13:function(t,e,r){"use strict";r.d(e,"a",(function(){return n})),r.d(e,"b",(function(){return o}));var n={};r.r(n),r.d(n,"create",(function(){return f}));var o={};r.r(o),r.d(o,"create",(function(){return h})),r.d(o,"updatePaymentMethod",(function(){return m}));var a=r(3),i=r(1),c=r.n(i),u=r(5),s=r.n(u);function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.id,n=e.state;return Object(a.a)("v2/setupintent/create",p({form_values:s()(e[0],{hash:!0}),form_data:JSON.stringify(n),form_id:r},t))}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){c()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=e.id,n=e.state,o=e.__unstableLegacyFormData;return Object(a.a)("v2/subscription",y({form_values:s()(e[0],{hash:!0}),form_data:JSON.stringify(y(y({},o),n)),form_id:r},t))}function m(t,e,r,n,o){return Object(a.a)("v2/subscription/payment_method/".concat(r,"/").concat(t),{customer_nonce:e,form_values:o,form_id:n})}},18:function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",i=n.toStringTag||"@@toStringTag";function c(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,r){return t[e]=r}}function u(t,e,r,n){var o=e&&e.prototype instanceof p?e:p,a=Object.create(o.prototype),i=new j(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var c=w(i,r);if(c){if(c===l)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=s(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,i),a}function s(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var l={};function p(){}function f(){}function d(){}var y={};c(y,o,(function(){return this}));var h=Object.getPrototypeOf,m=h&&h(h(x([])));m&&m!==e&&r.call(m,o)&&(y=m);var v=d.prototype=p.prototype=Object.create(y);function b(t){["next","throw","return"].forEach((function(e){c(t,e,(function(t){return this._invoke(e,t)}))}))}function g(t,e){var n;this._invoke=function(o,a){function i(){return new e((function(n,i){!function n(o,a,i,c){var u=s(t[o],t,a);if("throw"!==u.type){var l=u.arg,p=l.value;return p&&"object"==typeof p&&r.call(p,"__await")?e.resolve(p.__await).then((function(t){n("next",t,i,c)}),(function(t){n("throw",t,i,c)})):e.resolve(p).then((function(t){l.value=t,i(l)}),(function(t){return n("throw",t,i,c)}))}c(u.arg)}(o,a,n,i)}))}return n=n?n.then(i,i):i()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=s(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:P}}function P(){return{value:void 0,done:!0}}return f.prototype=d,c(v,"constructor",d),c(d,"constructor",f),f.displayName=c(d,i,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c(t,i,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},b(g.prototype),c(g.prototype,a,(function(){return this})),t.AsyncIterator=g,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new g(u(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},b(v),c(v,i,"Generator"),c(v,o,(function(){return this})),c(v,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),_(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;_(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},19:function(t,e,r){"use strict";e.a=function(t){var e=t.__unstableLegacyFormData.checkoutButtonLoadingText;t.addClass("simpay-checkout-form--loading"),t.find(".simpay-checkout-btn").prop("disabled",!0).addClass("simpay-disabled").find("span").html(e)}},2:function(t,e){function r(t,e,r,n,o,a,i){try{var c=t[a](i),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}t.exports=function(t){return function(){var e=this,n=arguments;return new Promise((function(o,a){var i=t.apply(e,n);function c(t){r(i,o,a,c,u,"next",t)}function u(t){r(i,o,a,c,u,"throw",t)}c(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},20:function(t,e,r){"use strict";e.a=function(t,e){var r,n=t.enable,o=t.__unstableLegacyFormData,a=o.stripeErrorMessages,i=o.unknownError;if(e&&""===e)r="";else if(void 0!==e){var c=e.message,u=e.code;r=c||e,u&&a[u]&&(r=a[u])}else r=i;t.find(".simpay-errors").html(r),n()}},3:function(t,e,r){"use strict";(function(t){r.d(e,"a",(function(){return c}));var n=r(2),o=r.n(n),a=r(0),i=r.n(a);function c(_x,t){return u.apply(this,arguments)}function u(){return(u=o()(i.a.mark((function e(r,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.ajax({data:n,method:"POST",url:"".concat(wpApiSettings.root,"wpsp/").concat(r),beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}});case 3:return e.abrupt("return",e.sent);case 6:throw e.prev=6,e.t0=e.catch(0),e.t0.responseJSON;case 10:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}}).call(this,r(4))},4:function(t,e){t.exports=jQuery},5:function(t,e){var r=/^(?:submit|button|image|reset|file)$/i,n=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function a(t,e,r){if(e.match(o))!function t(e,r,n){if(0===r.length)return n;var o=r.shift(),a=o.match(/^\[(.+?)\]$/);if("[]"===o)return e=e||[],Array.isArray(e)?e.push(t(null,r,n)):(e._values=e._values||[],e._values.push(t(null,r,n))),e;if(a){var i=a[1],c=+i;isNaN(c)?(e=e||{})[i]=t(e[i],r,n):(e=e||[])[c]=t(e[c],r,n)}else e[o]=t(e[o],r,n);return e}(t,function(t){var e=[],r=new RegExp(o),n=/^([^\[\]]*)/.exec(t);for(n[1]&&e.push(n[1]);null!==(n=r.exec(t));)e.push(n[1]);return e}(e),r);else{var n=t[e];n?(Array.isArray(n)||(t[e]=[n]),t[e].push(r)):t[e]=r}return t}function i(t,e,r){return r=r.replace(/(\r)?\n/g,"\r\n"),r=(r=encodeURIComponent(r)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+r}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var o=e.hash?{}:"",c=e.serializer||(e.hash?a:i),u=t&&t.elements?t.elements:[],s=Object.create(null),l=0;l<u.length;++l){var p=u[l];if((e.disabled||!p.disabled)&&p.name&&n.test(p.nodeName)&&!r.test(p.type)){var f=p.name,d=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(d=void 0),e.empty){if("checkbox"!==p.type||p.checked||(d=""),"radio"===p.type&&(s[p.name]||p.checked?p.checked&&(s[p.name]=!0):s[p.name]=!1),null==d&&"radio"==p.type)continue}else if(!d)continue;if("select-multiple"!==p.type)o=c(o,f,d);else{d=[];for(var y=p.options,h=!1,m=0;m<y.length;++m){var v=y[m],b=e.empty&&!v.value,g=v.value||b;v.selected&&g&&(h=!0,o=e.hash&&"[]"!==f.slice(f.length-2)?c(o,f+"[]",v.value):c(o,f,v.value))}!h&&e.empty&&(o=c(o,f,""))}}}if(e.empty)for(var f in s)s[f]||(o=c(o,f,""));return o}},58:function(t,e,r){"use strict";r.r(e),function(t){var e=r(1),n=r.n(e),o=r(2),a=r.n(o),i=r(0),c=r.n(i),u=r(8),s=r(13),l=r(20),p=r(19),f=r(10);function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function y(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){n()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var h=window.wpsp.paymentForms.getPaymentMethod,m={card:function(t){var e=t.stripeInstance,r=t.stripeInstance.elements;return e.createPaymentMethod({type:"card",card:r.card,billing_details:Object(f.b)(t)}).then((function(t){if(t.error)throw t.error;return t.paymentMethod}))},"ach-debit":function(t){return a()(c.a.mark((function e(){var r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,n=r.paymentMethodId,e.abrupt("return",{id:n});case 3:case"end":return e.stop()}}),e)})))()},"sepa-debit":function(t){return a()(c.a.mark((function e(){var r,n,o,a,i,u,l,p,d,y,h;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.state,n=t.stripeInstance,o=t.stripeInstance.elements,a=simpayUpdatePaymentMethod,i=a.customer_setupintent_nonce,u=r.customerId,e.next=5,s.a.create({customer_id:u,customer_nonce:i,payment_method_types:["sepa_debit"]},t);case 5:return l=e.sent,p=l.client_secret,e.next=9,n.confirmSepaDebitSetup(p,{payment_method:{sepa_debit:o.sepaDebit,billing_details:Object(f.b)(t)}});case 9:if(d=e.sent,y=d.error,h=d.setupIntent,!y){e.next=14;break}throw y;case 14:return e.abrupt("return",{id:h.payment_method});case 15:case"end":return e.stop()}}),e)})))()}};Object(u.a)((function(){var e=document.getElementById("simpay-form-update-payment-method");if(e){var r=simpayUpdatePaymentMethod,n=r.id,o=r.customer_id,i=r.customer_nonce,u=r.subscription_id,d=r.subscription_key,v=r.nonce,b=r.i18n,g=window.simplePayForms[n],w=g.form,O=w.config,j=w.bools,x=w.strings,P=w.i18n,S=g.stripe,k=O.paymentMethods,E={formDisplayType:"embedded",checkoutButtonLoadingText:b.loading,checkoutButtonText:b.submit,stripeParams:{key:S.strings.key},formId:n,isTestMode:j.isTestMode,companyName:x.companyName,stripeErrorMessages:P.stripeErrorMessages},L=t.extend(t(e),{id:n,__unstableLegacyFormData:E,state:{paymentMethods:k,paymentMethod:_.first(k),customerId:o},stripeInstance:Stripe(S.strings.key),getElementStyle:f.a,getOwnerData:f.b});L.setState=function(t){L.state=y(y({},L.state),t)},L.enable=function(){L.removeClass("simpay-checkout-form--loading").find(".simpay-checkout-btn").prop("disabled",!1).removeClass("simpay-disabled").text(b.submit)},L.disable=_.bind(p.a,L,L),L.error=_.bind(l.a,L,L),k.forEach((function(t){var e=t.id;h(e).setup(L,!0),"ach-debit"===e&&function(t){var e=t[0].querySelector(".simpay-ach-debit-wrap");if(e){var r=e.querySelector("button");if(r){var n=t.error,o=t.disable,i=t.enable,u=t.state,l=t.setState,p=t.stripeInstance,d=u.customerId,y=simpayUpdatePaymentMethod.customer_setupintent_nonce;r.addEventListener("click",function(){var e=a()(c.a.mark((function e(r){var a,u,h,m,v,b,g,w;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),o(),e.next=4,s.a.create({customer_id:d,customer_nonce:y,payment_method_types:["us_bank_account"]},t).catch((function(t){return n(t)}));case 4:return a=e.sent,u=a.client_secret,h=Object(f.b)(t),m=h.name,v=h.email,e.next=9,p.collectBankAccountForSetup({clientSecret:u,params:{payment_method_type:"us_bank_account",payment_method_data:{billing_details:{name:m,email:v}}}});case 9:if(b=e.sent,g=b.setupIntent,!(w=b.error)){e.next=14;break}throw w;case 14:if("requires_payment_method"!==g.status){e.next=16;break}return e.abrupt("return",i());case 16:"requires_confirmation"===g.status&&(l({paymentMethodId:g.payment_method}),i(),t[0].querySelector(".simpay-ach-debit-wrap button").style.display="none",t[0].querySelector("#simpay-ach-debit-terms").style.display="block",t[0].querySelector("#simpay-ach-debit-terms-recurring").style.display="block",t[0].querySelector(".simpay-checkout-btn-container").style.display="block");case 17:case"end":return e.stop()}}),e)})));return function(_x){return e.apply(this,arguments)}}())}}}(L);var r=L[0].querySelector('.simpay-payment-method-toggle[data-payment-method="'.concat(e,'"]'));r&&r.addEventListener("click",(function(){L.setState({paymentMethod:_.findWhere(k,{id:e})})}))})),e.addEventListener("submit",function(){var t=a()(c.a.mark((function t(e){var r,a,l,p,f;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),r=L.error,a=L.disable,l=L.state,p=l.paymentMethod,a(),t.next=6,m[p.id](L).catch(r);case 6:if(f=t.sent){t.next=9;break}return t.abrupt("return");case 9:return t.prev=9,t.next=12,s.b.updatePaymentMethod(o,i,u,n,{payment_method_id:f.id,_wpnonce:v,subscription_key:d}).catch((function(t){throw t}));case 12:window.location.replace(window.location.href),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(9),r(t.t0);case 18:case"end":return t.stop()}}),t,null,[[9,15]])})));return function(e){return t.apply(this,arguments)}}())}}))}.call(this,r(4))},8:function(t,e,r){"use strict";function n(t){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",t):t()}r.d(e,"a",(function(){return n}))}});